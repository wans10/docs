---
title: "接入 OpenAI Codex CLI"
description: "将 LLM Hub 模型集成到 OpenAI Codex CLI 的方法"
---
> 通过 AiHubMix 在命令行中支持 OpenAI Codex 调用

# OpenAI Codex CLI 集成

AiHubMix 提供了与 OpenAI [Codex CLI](https://github.com/openai/codex) 的无缝集成，让你可以在命令行环境中利用先进的 AI 编程助手。通过简单的配置步骤，即可在终端中直接使用自然语言执行各种编程和系统操作任务。

使用之前，请先运行以下命令安装或更新：

```bash
npm install -g @openai/codex
```

## 配置步骤

### 1. 环境变量设置

打开你的 Shell 配置文件（例如 `.zshrc` 或 `.bashrc`），添加以下环境变量：

```bash
export OPENAI_BASE_URL="https://aihubmix.com/v1"
export OPENAI_API_KEY="sk-***" # 替换为你的 AiHubMix API 密钥
```

<Warning>
    这里的 `OPENAI_API_KEY` 应该使用 AiHubMix 的[密钥](https://aihubmix.com/token)，变量名保持为 `OPENAI_API_KEY` 是为了兼容 OpenAI 原生客户端。。
</Warning>

### 2. 应用配置更改

在终端中执行以下命令，使环境变量生效：

```bash
source ~/.zshrc  # 如果使用 zsh
# 或
source ~/.bashrc  # 如果使用 bash
```

### 3. 启动 Codex CLI

定位到你的项目目录，然后运行 `codex` 命令：

```bash
cd /你的项目路径
codex
```

<img src="https://mintcdn.com/aihubmix/UgvkHPDoK6o04763/public/cn/CodexCli-1.png?fit=max&auto=format&n=UgvkHPDoK6o04763&q=85&s=5284c6e04394d3d0f1f8279751f5943d" alt="图片" data-og-width="2792" width="2792" data-og-height="2350" height="2350" data-path="public/cn/CodexCli-1.png" srcset="https://mintcdn.com/aihubmix/UgvkHPDoK6o04763/public/cn/CodexCli-1.png?w=280&fit=max&auto=format&n=UgvkHPDoK6o04763&q=85&s=9dbdb6a387708d26b314ecc0dea99f82 280w, https://mintcdn.com/aihubmix/UgvkHPDoK6o04763/public/cn/CodexCli-1.png?w=560&fit=max&auto=format&n=UgvkHPDoK6o04763&q=85&s=cf1d020106f48bf578bd5f3a174f767f 560w, https://mintcdn.com/aihubmix/UgvkHPDoK6o04763/public/cn/CodexCli-1.png?w=840&fit=max&auto=format&n=UgvkHPDoK6o04763&q=85&s=aa5b088bbefb9660bb8cf8f0ffa78046 840w, https://mintcdn.com/aihubmix/UgvkHPDoK6o04763/public/cn/CodexCli-1.png?w=1100&fit=max&auto=format&n=UgvkHPDoK6o04763&q=85&s=050c888ba648a5e4a762c4dfad44ba97 1100w, https://mintcdn.com/aihubmix/UgvkHPDoK6o04763/public/cn/CodexCli-1.png?w=1650&fit=max&auto=format&n=UgvkHPDoK6o04763&q=85&s=c3edb817169796f3f9e9c84470489ec7 1650w, https://mintcdn.com/aihubmix/UgvkHPDoK6o04763/public/cn/CodexCli-1.png?w=2500&fit=max&auto=format&n=UgvkHPDoK6o04763&q=85&s=f4ccfa0643537fbf59bd3bf9321fce36 2500w" data-optimize="true" data-opv="2" />

### 4. 使用自然语言执行任务

现在你可以通过自然语言向 Codex CLI 输入指令，例如：

```bash
# 示例输入
讲解一下 AnimatedText
```

<img src="https://mintcdn.com/aihubmix/UgvkHPDoK6o04763/public/cn/CodexCli-2.png?fit=max&auto=format&n=UgvkHPDoK6o04763&q=85&s=1ee2d56e2f947df0c100c4d9936b6528" alt="图片" data-og-width="2792" width="2792" data-og-height="2350" height="2350" data-path="public/cn/CodexCli-2.png" srcset="https://mintcdn.com/aihubmix/UgvkHPDoK6o04763/public/cn/CodexCli-2.png?w=280&fit=max&auto=format&n=UgvkHPDoK6o04763&q=85&s=bd3be1139d9c06c82f097111cace0fa1 280w, https://mintcdn.com/aihubmix/UgvkHPDoK6o04763/public/cn/CodexCli-2.png?w=560&fit=max&auto=format&n=UgvkHPDoK6o04763&q=85&s=87ec087f1c1eeb1a5d94b35d48dbee6f 560w, https://mintcdn.com/aihubmix/UgvkHPDoK6o04763/public/cn/CodexCli-2.png?w=840&fit=max&auto=format&n=UgvkHPDoK6o04763&q=85&s=050a080d82d2d3f213654432a3988ba4 840w, https://mintcdn.com/aihubmix/UgvkHPDoK6o04763/public/cn/CodexCli-2.png?w=1100&fit=max&auto=format&n=UgvkHPDoK6o04763&q=85&s=c1ac8f2e57370ac41d39b43fee1044ae 1100w, https://mintcdn.com/aihubmix/UgvkHPDoK6o04763/public/cn/CodexCli-2.png?w=1650&fit=max&auto=format&n=UgvkHPDoK6o04763&q=85&s=7bb8198205e27aa69c823661c16d2e3a 1650w, https://mintcdn.com/aihubmix/UgvkHPDoK6o04763/public/cn/CodexCli-2.png?w=2500&fit=max&auto=format&n=UgvkHPDoK6o04763&q=85&s=11ee00d78d18c45f7e951eabe2800ad2 2500w" data-optimize="true" data-opv="2" />

## 高级配置

<Tip>
    * 默认模型为 `codex-mini-latest`，一个专为编码任务微调过的 `o4-mini`，可以在 `~/.codex/config.json`修改
    * 目前仅支持 OpenAI 家的模型，模型列表可在 [Responses API 文档](https://platform.openai.com/docs/api-reference/responses) 中查看
    * 你可以通过编辑 `~/.codex/instructions.md` 文件来自定义系统提示词，定制 AI 助手的行为
</Tip>

## 实用命令参考

### 帮助命令

```bash
codex -h
```

### 完整命令选项

```bash
Usage
  $ codex [options] <prompt>

Options
  -h, --help                 显示帮助信息并退出
  -m, --model <model>        指定使用的模型 (默认: codex-mini-latest)
  -i, --image <path>         包含图像输入的文件路径
  -v, --view <rollout>       查看之前保存的会话记录
  -q, --quiet                非交互模式，仅打印助手的最终输出
  -a, --approval-mode <mode> 覆盖审批策略: 'suggest', 'auto-edit', 或 'full-auto'

  --auto-edit                自动批准文件编辑；仍会提示确认命令
  --full-auto                自动批准沙箱环境中的编辑和命令

  --no-project-doc           不自动包含仓库中的 'codex.md' 文件
  --project-doc <file>       包含指定的 Markdown 文件作为上下文
  --full-stdout              不截断命令输出的 stdout/stderr

危险选项
  --dangerously-auto-approve-everything
                             跳过所有确认提示并直接执行命令（无沙箱保护）
                             仅用于临时本地测试环境

实验性选项
  -f, --full-context         以"完整上下文"模式启动，将整个仓库加载到上下文中
                             并在一次操作中应用批量编辑
                             仅兼容 --model 参数

示例
  $ codex "编写并运行一个打印 ASCII 艺术的 Python 程序"
  $ codex -q "修复构建问题"
```